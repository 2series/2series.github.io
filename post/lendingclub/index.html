<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.2.5">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Rihad Variawa">

  
  
  
    
  
  <meta name="description" content="The code
Lending Club is the world&rsquo;s largest peer-to-peer lending company, offering a platform for borrowers and lenders to work directly with one another, eliminating the need for a financial intermediary like a bank.
Removing the middle-man generally allows both borrowers and lenders to benefit from better interest rates than they otherwise would, which makes peer-to-peer lending an attractive proposition.
This post will be the first in a series of posts analyzing the probability of default and expected return of Lending Club notes.">

  
  <link rel="alternate" hreflang="en-us" href="../../post/lendingclub/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Playfair+Display:400,700|Fauna+One">
  

  <link rel="stylesheet" href="../../styles.css">
  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-132898309-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  

  <link rel="manifest" href="../../site.webmanifest">
  <link rel="icon" type="image/png" href="../../img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="../../img/icon-192.png">

  <link rel="canonical" href="../../post/lendingclub/">

  
  
  
  
    
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@2series_rv">
  <meta property="twitter:creator" content="@2series_rv">
  
  <meta property="og:site_name" content="Rihad Variawa">
  <meta property="og:url" content="/post/lendingclub/">
  <meta property="og:title" content="Analyzing Historical Default Rates of Lending Club Notes | Rihad Variawa">
  <meta property="og:description" content="The code
Lending Club is the world&rsquo;s largest peer-to-peer lending company, offering a platform for borrowers and lenders to work directly with one another, eliminating the need for a financial intermediary like a bank.
Removing the middle-man generally allows both borrowers and lenders to benefit from better interest rates than they otherwise would, which makes peer-to-peer lending an attractive proposition.
This post will be the first in a series of posts analyzing the probability of default and expected return of Lending Club notes."><meta property="og:image" content="/img/ship.jpg">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2019-12-10T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2019-12-10T00:00:00&#43;00:00">
  

  

  

  <title>Analyzing Historical Default Rates of Lending Club Notes | Rihad Variawa</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >
  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="../../">Rihad Variawa</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="../../#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="../../#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="../../#posts">
            
            <span>Blog Posts</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="../../#publications">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="../../#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">Analyzing Historical Default Rates of Lending Club Notes</h1>

  

  
    



<meta content="2019-12-10 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2019-12-10 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Dec 10, 2019</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    14 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="../../post/lendingclub/#disqus_thread"></a>
  

  

  
    

  

</div>

    
















  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<p><img src="https://media.giphy.com/media/l4q87BzdPfCSEOvKM/giphy.gif" alt="" /></p>

<p><a href="https://github.com/2series/lending-club" target="_blank">The code</a></p>

<p>Lending Club is the world&rsquo;s largest peer-to-peer lending company, offering a platform for borrowers and lenders to work directly with one another, eliminating the need for a financial intermediary like a bank.</p>

<p>Removing the middle-man generally allows both borrowers and lenders to benefit from better interest rates than they otherwise would, which makes peer-to-peer lending an attractive proposition.</p>

<p>This post will be the first in a series of posts analyzing the probability of default and expected return of Lending Club notes. In this first post, I&rsquo;ll cover some of the background on Lending Club, talk about getting and cleaning the loan data, and perform some exploratory analysis on the available variables and outcomes. In subsequent posts, I&rsquo;ll work on developing a predictive model for determining the loan default probabilities. <em>Before investing, it is always important to fully understand the risks, and this post does not constitute investment advice in either Lending Club or in Lending Club notes.</em></p>

<h3 id="background-and-gathering-data">Background and Gathering Data</h3>

<p>Lending Club makes all past borrower data freely available <a href="https://www.lendingclub.com/info/download-data.action" target="_blank">on their website</a> for review, and I will be referencing the 2012-2013 data throughout this post.</p>

<p>To download the 2012-2013 data from Lending Club:</p>

<pre><code class="language-R"># Download and extract data from Lending Club
if (!file.exists(&quot;LoanStats3b.csv&quot;)) {
    fileUrl &lt;- &quot;https://resources.lendingclub.com/LoanStats3b.csv.zip&quot;
    download.file(fileUrl, destfile = &quot;LoanStats3b.csv.zip&quot;, method=&quot;curl&quot;)
    dateDownloaded &lt;- date()
    unzip(&quot;LoanStats3b.csv.zip&quot;)
}

# Read in Lending Club Data
if (!exists(&quot;full_dataset&quot;)) {
  full_dataset &lt;- read.csv(file=&quot;LoanStats3b.csv&quot;, header=TRUE, skip = 1)
}
</code></pre>

<p>For each loan in the file, Lending Club provides an indication of the current loan status. Because many of the loan statuses represent similar outcomes, I&rsquo;ve mapped them from Lending Club&rsquo;s 7 down to only 2, simplifying the problem of classifying loan outcomes without much loss of information useful for investment decisions. My two outcomes &laquo;Performing&raquo; and &laquo;NonPerforming&raquo; seek to separate those loans likely to pay in full from those likely to default. Below I include a table summarizing the mappings:</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Floanstatuses.png" alt="Loan Statuses" /></p>

<p>Now that we&rsquo;ve loaded the data, let&rsquo;s extract the fields we need and do some cleaning. We can eliminate any fields that would not have been known at the time of issuance, as we&rsquo;ll be trying to make decisions on loan investments using available pre-issuance data. We can also eliminate a few indicative data fields that are repetitive or too granular to be analyzed, and make some formatting changes to get the data ready for analysis. Finally, we&rsquo;ll map the loan statuses to the binary &laquo;Performing&raquo; and &laquo;NonPerforming&raquo; classifiers as discussed above.</p>

<pre><code class="language-R"># Select variables to keep and subset the data
variables &lt;- c(&quot;id&quot;, &quot;loan_amnt&quot;, &quot;term&quot;, &quot;int_rate&quot;, &quot;installment&quot;, &quot;grade&quot;, 
               &quot;sub_grade&quot;, &quot;emp_length&quot;, &quot;home_ownership&quot;, &quot;annual_inc&quot;, 
               &quot;is_inc_v&quot;, &quot;loan_status&quot;, &quot;purpose&quot;, &quot;addr_state&quot;, &quot;dti&quot;, 
               &quot;delinq_2yrs&quot;, &quot;earliest_cr_line&quot;, &quot;inq_last_6mths&quot;, 
               &quot;mths_since_last_delinq&quot;, &quot;mths_since_last_record&quot;, &quot;open_acc&quot;, 
               &quot;pub_rec&quot;, &quot;revol_bal&quot;, &quot;revol_util&quot;, &quot;total_acc&quot;, 
               &quot;initial_list_status&quot;, &quot;collections_12_mths_ex_med&quot;, 
               &quot;mths_since_last_major_derog&quot;)
train &lt;- full_dataset[variables]


# Reduce loan status to binary &quot;Performing&quot; and &quot;NonPerforming&quot; Measures:
train$new_status &lt;- factor(ifelse(train$loan_status %in% c(&quot;Current&quot;, &quot;Fully Paid&quot;), 
                                  &quot;Performing&quot;, &quot;NonPerforming&quot;))

# Convert a subset of the numeric variables to factors
train$delinq_2yrs &lt;- factor(train$delinq_2yrs)
train$inq_last_6mths &lt;- factor(train$inq_last_6mths)
train$open_acc &lt;- factor(train$open_acc)
train$pub_rec &lt;- factor(train$pub_rec)
train$total_acc &lt;- factor(train$total_acc)

# Convert interest rate numbers to numeric (strip percent signs)
train$int_rate &lt;- as.numeric(sub(&quot;%&quot;, &quot;&quot;, train$int_rate))
train$revol_util &lt;- as.numeric(sub(&quot;%&quot;, &quot;&quot;, train$revol_util))
</code></pre>

<h3 id="analyzing-predictive-power-of-variables">Analyzing Predictive Power of Variables</h3>

<h4 id="lending-club-grades-and-subgrades">Lending Club Grades and Subgrades</h4>

<p>All types of borrowers are using peer-to-peer lending for a variety of purposes. This raises the question of how to determine appropriate interest rates given the varying levels of risk across borrowers. Luckily for us, Lending Club handles this for us. They use an algorithm to determine a borrower&rsquo;s level of risk, and then set the interest rates according to the level of risk. Specifically, Lending Club maps borrowers to a series of grades [A-F] and subgrades [A-F][1-5] based on their risk profile.  Loans in each subgrade are then given appropriate interest rates. The specific rates will change over time according to market conditions, but generally they will fall within a tight range for each subgrade.</p>

<p>Let&rsquo;s take a look at the proportions of performing and non-performing loans by Lending Club&rsquo;s provided grades:</p>

<pre><code class="language-R">by_grade &lt;- table(train$new_status, train$grade, exclude=&quot;&quot;)
prop_grade &lt;- prop.table(by_grade,2)
barplot(prop_grade, main = &quot;Loan Performance by Grade&quot;, xlab = &quot;Grade&quot;, 
        col=c(&quot;darkblue&quot;,&quot;red&quot;), legend = rownames(prop_grade))

by_subgrade &lt;- table(train$new_status, train$sub_grade, exclude=&quot;&quot;)
prop_subgrade &lt;- prop.table(by_subgrade,2)
barplot(prop_subgrade, main = &quot;Loan Performance by Sub Grade&quot;, xlab = &quot;SubGrade&quot;,
        col=c(&quot;darkblue&quot;,&quot;red&quot;),legend = rownames(prop_subgrade))
</code></pre>

<p>We can see from the chart below that rates of default steadily increase as the loan grades worsen from A to G, as expected.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fbygrade.png" alt="Performance by Grade" /></p>

<p>We see a similar pattern for the subgrades, although the trend begins to weaken across the G1-G5 subgrades. On further investigation, I found that there are only a few hundred data points for each of these subgrades, in contrast to thousands of data points for the A-F subgrades, and these differences are not large enough to be significant.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fbysubgrade.png" alt="Performance by Subgrade" /></p>

<p>Overall, it looks like the Lending Club grading system does a pretty great job of predicting ultimate loan performance, but let&rsquo;s check out some of the other available data to see what other trends we might be able to find in the data.</p>

<h4 id="home-ownership">Home Ownership</h4>

<p>The Lending Club data has 3 main classifications for home ownership: mortgage (outstanding mortgage payment), own (home is owned outright), and rent. I would expect those with mortgages to default less frequently than those who rent, both because there are credit requirements to get a mortgage and because those with mortgages might tend to be more established. Let&rsquo;s see whether this is actually the case:</p>

<pre><code class="language-R">ownership_status &lt;- table(train$new_status,train$home_ownership,
                     exclude=c(&quot;OTHER&quot;,&quot;NONE&quot;,&quot;&quot;))

prop_ownership &lt;- round(prop.table(ownership_status, 2) * 100, 2)
</code></pre>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fownershipstatus.png" alt="Ownership Status" /></p>

<p>So those with mortgages default the least, followed by those who own their homes outright and finally those who rent.  The differences here are much smaller than when comparing different grades, but they are still notable. Let&rsquo;s verify whether these are statistically significant:</p>

<pre><code class="language-R"># Calculate the counts of mortgage, owners, and renters:
count_m &lt;- sum(train$home_ownership == &quot;MORTGAGE&quot;)
count_o &lt;- sum(train$home_ownership == &quot;OWN&quot;)
count_r &lt;- sum(train$home_ownership == &quot;RENT&quot;)

# Calculate the counts of default for mortgages, owners, and renters:
dflt_m &lt;- sum(train$home_ownership == &quot;MORTGAGE&quot; &amp; train$new_status == &quot;NonPerforming&quot;)
dflt_o &lt;- sum(train$home_ownership == &quot;OWN&quot; &amp; train$new_status == &quot;NonPerforming&quot;)
dflt_r &lt;- sum(train$home_ownership == &quot;RENT&quot; &amp; train$new_status == &quot;NonPerforming&quot;)

# 1-sided proportion test for mortgage vs owners
prop.test(c(dflt_m,dflt_o), c(count_m,count_o), alternative = &quot;less&quot;)

# 1-sided proportion test for owners vs renters
prop.test(c(dflt_o,dflt_r), c(count_o,count_r), alternative = &quot;less&quot;)
</code></pre>

<p>The p-value of the first test was $$6.377*10^-12$$ and the p-value for the second test was $$3.787*10^-8$$, indicating that the differences in both of these proportions are very statistically significant. Although the differences in the default probabilities are somewhat small, on the order of 1.5%, the number of data points is in the high tens of thousands, which contributes to the significance. Given this result, we can conclude that similar differences in default probabilities for other factors should also be significant, so long as a similar quantity of data points is available.</p>

<p><strong>Note:</strong> for the remaining analysis, the code for each variable becomes a bit repetitive, so in the interest of minimizing the length of this post I will present only the results. If you are interested to see the actual code, you will find it in the appendix at the bottom of this post. You can also read the <a href="https://github.com/2series/lending-club" target="_blank">complete code on Github</a>.</p>

<h4 id="debt-to-income-ratio">Debt to Income Ratio</h4>

<p>Debt to income ratio indicates the ratio between a borrowers monthly debt payment and monthly income. This was originally formatted as a continuous numerical variable, but I bucketed it into 5% increments to better visualize the effect on loan performance. As we might expect, there is a steady increase in the percentage of non-performing loans as DTI increases, reflecting the constraints that increased debt put onto borrower ability to repay:</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fdti.png" alt="Debt to Income Ratio" /></p>

<h4 id="revolving-utilization-percent">Revolving Utilization Percent</h4>

<p>Revolving utilization percent is the portion of a borrower&rsquo;s revolving credit limit (i.e. credit card limit) that they actually are using at any given point. For example, if a borrower&rsquo;s total credit limit is UDS15,000 and their outstanding balance is USD1,500 their utilization rate would be 10%. We can see below that the percentage of non-performing loans steadily increases with utilization rate.</p>

<p>Borrowers with high utilization rates are more likely to have high fixed credit card payments which might affect their ability to repay their loans. Also, a high utilization rate often reflects a lack of other financing options, with borrowers turning to peer-to-peer lending as a last resort. This is in contrast to those borrowers with low utilization rates, who may be using peer-to-peer lending opportunistically to pursue lower interest payments.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Futlization.png" alt="Revolving Utilization" /></p>

<h4 id="loan-purpose">Loan Purpose</h4>

<p>Loan purpose refers to the borrower&rsquo;s stated reason for taking out the loan.  We see below that credit card and debt consolidation tend to have better performance, along with home improvement, cars, and other major purchases. Luxury spending on vacations and weddings and unexpected medical and moving expenses generally have worse performance. Small business loans perform very poorly, perhaps reflecting the fact that those borrowers unable to get bank financing for their small business may have poor credit or business plans that aren&rsquo;t fully developed.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Floanpurpose.png" alt="Loan Purpose" /></p>

<h4 id="inquiries-in-the-past-6-months">Inquiries in the Past 6 Months</h4>

<p>Number of inquiries refers to the number of times a borrower&rsquo;s credit report is accessed by financial institutions, which generally happens when the borrower is seeking a loan or credit line. More inquiries leads to higher rates of nonperformance, perhaps indicating that increased borrower desperation to access credit might highlight poor financial health. Interestingly, we see an increase in loan performance in the 4+ inquiries bucket. These high levels of inquiries may reflect financially savvy borrowers shopping around for mortgage loans or credit cards.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Finquiries.png" alt="Inquiries" /></p>

<h4 id="number-of-total-accounts">Number of Total Accounts</h4>

<p>A larger number of total accounts indicates a longer credit history and a high level of trust between the borrower and financial institutions, both of which point to financial health and lower rates of default. We see steady increases in the rates of performing loans as the number of accounts increases from 7 to around 20, but diminishing effects after that.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Ftotalaccounts.png" alt="Total Accounts" /></p>

<h4 id="annual-income">Annual Income</h4>

<p>As we might expect, the higher a borrower&rsquo;s annual income the more likely they are to be able to repay their loans.  Below I&rsquo;ve broken the income data into quintiles, and we can see that those in the top 20% of annual incomes (USD95000 +) are approximately 6% more likely to be performing borrowers than those in the bottom 20% (less than USD42000).</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fannualincome.png" alt="Annual Income" /></p>

<h4 id="loan-amount">Loan Amount</h4>

<p>As the amount borrowed increases, we see increasing rates of nonperforming loans. The difference between the first two buckets is only around 1% (and the intra-bucket differences are very small), but we see a larger decrease in loan quality in the USD30,000 - USD35,000 bucket. Noting that the Lending Club maximum loan is USD35,000, this may indicate particularly desperate borrowers who are maximizing their possible borrowing.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Floanamount.png" alt="Loan Amount" /></p>

<h4 id="employment-length">Employment Length</h4>

<p>We&rsquo;d expect those who have been employed longer to be more stable, and thus less likely to default. Looking into the data, 3 key groups emerged: the unemployed, those employed less than 10 years, and those employed for 10+ years:</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Femploymentlength.png" alt="Employment Length" /></p>

<h4 id="delinquencies-in-the-past-2-years">Delinquencies in the Past 2 Years</h4>

<p>The number of delinquencies in the past 2 years indicates the number of times a borrower has been behind on payments. I combined all values 3 or larger into a single bucket for analysis, as this was a long right-tailed distribution. Interestingly, those with a single delinquency seem to perform more often than those with none. In general however, the differences between 0, 1, and 2 delinquencies are relatively small, while those with greater than 3 show a significant decrease in performance.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fdelinquencies.png" alt="Delinquencies" /></p>

<h4 id="number-of-open-accounts">Number of Open Accounts</h4>

<p>Unlike the number of total accounts above, which we saw to be quite significant, the number of open accounts variable was not a particularly strong indicator:</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fopenaccounts.png" alt="Open Accounts" /></p>

<h4 id="verified-income-status">Verified Income Status</h4>

<p>Lending Club categorizes income verification into three statuses: not verified, source verified, and verified. Verified income means that Lending Club independently verified both the source and size of reported income, source verified means that they verified only the source of the income, and not verified means there was no independent verification of the reported values. Interestingly, we see that as income verification increases, the loan performance actually worsens. During the mortgage crisis, non-verified &laquo;no-doc&raquo; loans were among the worst performing, so the reversal here is interesting. This likely reflects the fact that Lending Club only verifies those borrowers who seem to be of worse credit quality, so there may be <a href="http://en.wikipedia.org/wiki/Confounding" target="_blank">confounding variables</a> present here.</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fverifiedincome.png" alt="Verified Income" /></p>

<h4 id="number-of-public-records">Number of Public Records</h4>

<p>Public records generally refer to bankruptcies, so we would expect those with more public records to show worse performance. Actually, performance increases as we move from 0 to 1 to 2 public records. This possibly indicates stricter lending standards from Lending Club on those borrowers with public records:</p>

<p><img src="https://r-variawa.rstudio.cloud/d51019dc107e470cb38611324883b9a0/file_show?path=%2Fcloud%2Fproject%2Fstatic%2Fimg%2Fpublicrecords.png" alt="Public Records" /></p>

<h4 id="variables-that-were-not-significant">Variables that were not significant:</h4>

<ul>
<li>Months since last delinquency</li>
<li>Months since last major derogatory note</li>
<li>Collections previous 12 months (too few data points on which to make any conclusions or form predictions)</li>
</ul>

<h3 id="summary">Summary</h3>

<ul>
<li>Lending club grade and subgrade variables provide the most predictive power for determining expected loan performance.</li>
<li>A large number of the other variables also provide strong indications of expected performance.  Among the most telling are debt-to-income ratio, credit utilization rate, home ownership status, loan purpose, annual income, inquiries in the past 6 months, and number of total accounts.</li>
<li>Verified income status and number of public records show results opposite from what we would expect. This is likely due to increased standards on borrowers with poorer credit history, so all else equal we see outperformance in these loans.</li>
</ul>

<p>We&rsquo;ve gotten a good understanding of the available borrower data, and we&rsquo;ve seen which variables give the best indiciations of future loan performance. In the next post, We&rsquo;ll work on developing a predictive model for projecting the probability of default for newly issued loans.</p>

<h2 id="appendix">Appendix</h2>

<p>Below I&rsquo;ve included the code used to generate the numbers in the tables above. You can also find the <a href="https://github.com/2series/lending-club" target="_blank">complete code available on Github</a></p>

<pre><code class="language-R">### Explore the relationships between default rates and factor levels
### I take a few different approaches, but the key idea is the same


# Home Ownership (exclude status &quot;OTHER&quot; and &quot;NONE&quot; because of few data points)
home_ownership &lt;- table(train$new_status,train$home_ownership,
                     exclude=c(&quot;OTHER&quot;,&quot;NONE&quot;,&quot;&quot;))
prop_home_ownership &lt;- round(prop.table(home_ownership, 2) * 100, 2)

# Test for significance of the difference in proportions for home ownership factors
# Calculate the counts of mortgage, owners, and renters:
count_m &lt;- sum(train$home_ownership == &quot;MORTGAGE&quot;)
count_o &lt;- sum(train$home_ownership == &quot;OWN&quot;)
count_r &lt;- sum(train$home_ownership == &quot;RENT&quot;)

# Calculate the counts of default for mortgages, owners, and renters:
dflt_m &lt;- sum(train$home_ownership == &quot;MORTGAGE&quot; &amp; train$new_status == &quot;NonPerforming&quot;)
dflt_o &lt;- sum(train$home_ownership == &quot;OWN&quot; &amp; train$new_status == &quot;NonPerforming&quot;)
dflt_r &lt;- sum(train$home_ownership == &quot;RENT&quot; &amp; train$new_status == &quot;NonPerforming&quot;)

# 1-sided proportion test for mortgage vs owners
prop.test(c(dflt_m,dflt_o), c(count_m,count_o), alternative = &quot;less&quot;)
# 1-sided proportion test for owners vs renters
prop.test(c(dflt_o,dflt_r), c(count_o,count_r), alternative = &quot;less&quot;)


# Debt to Income Ratio (break into factors at 5% levels)
train$new_dti &lt;- cut(train$dti, breaks = c(0, 5, 10, 15, 20, 25, 30, 35))
dti &lt;- table(train$new_status, train$new_dti)
prop_dti &lt;- round(prop.table(dti, 2) * 100, 2)


# Revolving Utilization (break into 0 - 20, then factors of 10, then 80+)
train$new_revol_util &lt;- cut(train$revol_util, breaks = c(0, 20, 30, 40, 50, 60, 70, 80, 141))
revol_util &lt;- table(train$new_status, train$new_revol_util)
prop_revol_util &lt;- round(prop.table(revol_util, 2) * 100, 2)


# Loan Purpose (exclude renewable energy because so few data points)
purpose &lt;- table(train$new_status,train$purpose, exclude = c(&quot;renewable_energy&quot;,&quot;&quot;))
prop_purpose &lt;- round(prop.table(purpose, 2) * 100, 2)


# Inquiries in the last 6 months (combine factor levels for any &gt; 4)
levels(train$inq_last_6mths) &lt;- c(&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, rep(&quot;4+&quot;, 5))
inq_last_6mths &lt;- table(train$new_status, train$inq_last_6mths)
prop_inq_last_6mths &lt;- round(prop.table(inq_last_6mths, 2) * 100, 2)


# Number of total accounts (combine factor levels into groups of 5, then 23+)
levels(train$total_acc) &lt;- c(rep(&quot;&lt;= 7&quot;, 5), rep(&quot;8 - 12&quot;, 5), 
                             rep(&quot;13 - 17&quot;, 5), rep(&quot;18 - 22&quot;, 5), 
                             rep(&quot;23+&quot;, 68))
total_acc &lt;- table(train$new_status, train$total_acc)
prop_total_acc &lt;- round(prop.table(total_acc, 2) * 100, 2)


# Annual Income (factor into quantiles of 20%)
train$new_annual_inc &lt;- cut(train$annual_inc,
                            quantile(train$annual_inc, na.rm = TRUE,
                                     probs = c(0, 0.2, 0.4, 0.6, 0.8, 1)))
annual_inc &lt;- table(train$new_status, train$new_annual_inc)
prop_annual_inc &lt;- round(prop.table(annual_inc, 2) * 100, 2)


# Loan Amount (break into &lt; 15k, 15k - 30k, 30k - 35k)
train$new_loan_amnt &lt;- cut(train$loan_amnt,c(0, 15000, 30000, 35000))
loan_amnt &lt;- table(train$new_status, train$new_loan_amnt)
prop_loan_amnt &lt;- round(prop.table(loan_amnt, 2) * 100, 2)


# Employment Length (combine factor levels for better comparison)
levels(train$emp_length) &lt;- c(&quot;None&quot;, &quot;&lt; 10 years&quot;, &quot;&lt; 10 years&quot;, &quot;10+ years&quot;,
                              rep(&quot;&lt; 10 years&quot;, 8), &quot;None&quot;)
emp_length &lt;- table(train$new_status, train$emp_length)
prop_emp_length &lt;- round(prop.table(emp_length, 2) * 100, 2)


# Delinquencies in the past 2 Years (combine factors levels for any &gt; 3)
levels(train$delinq_2yrs) &lt;- c(&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, rep(&quot;3+&quot;, 17))
delinq_2yrs &lt;- table(train$new_status, train$delinq_2yrs)
prop_delinq_2yrs &lt;- round(prop.table(delinq_2yrs, 2) * 100, 2)


# Number of Open Accounts (combine factor levels into groups of 5)
levels(train$open_acc) &lt;- c(rep(&quot;&lt;= 5&quot;, 6), rep(&quot;6 - 10&quot;, 5), 
                            rep(&quot;11 - 15&quot;, 5), rep(&quot;16+&quot;, 38))
open_acc &lt;- table(train$new_status, train$open_acc)
prop_open_acc &lt;- round(prop.table(open_acc, 2) * 100, 2)


# Verified income status
is_inc_v &lt;- table(train$new_status, train$is_inc_v, exclude = &quot;&quot;)
prop_is_inc_v &lt;- round(prop.table(is_inc_v, 2) * 100, 2)


# Number of Public Records (break factor levels into 0, 1, 2+)
levels(train$pub_rec) &lt;- c(&quot;0&quot;, &quot;1&quot;, rep(&quot;2+&quot;, 12))
pub_rec &lt;- table(train$new_status, train$pub_rec)
prop_pub_rec &lt;- round(prop.table(pub_rec, 2) * 100, 2)


# Months Since Last Record (compare blank vs. non-blank)
na_last_record &lt;- sum(is.na(train$mths_since_last_record))
not_na_last_record &lt;- sum(!is.na(train$mths_since_last_record))
na_last_rec_dflt &lt;- sum(is.na(train$mths_since_last_record) &amp; train$new_status == &quot;NonPerforming&quot;)
not_na_last_rec_dflt &lt;- sum(!is.na(train$mths_since_last_record) &amp; train$new_status == &quot;NonPerforming&quot;)

not_na_last_rec_pct_dflt &lt;- not_na_last_rec_dflt / not_na_last_record
na_last_rec_pct_dflt &lt;- na_last_rec_dflt/na_last_record


# Months since last delinquency (break factor levels in increments of 10)
train$mths_since_last_delinq &lt;- cut(train$mths_since_last_delinq, 
                                   breaks = c(0, 10, 20, 30, 40, 50, 60, 156))
mths_since_last_delinq &lt;- table(train$new_status, train$mths_since_last_delinq)
prop_mths_since_last_delinq &lt;- round(prop.table(mths_since_last_delinq, 2) * 100, 2)


# Collections last 12 months
collections &lt;- table(train$new_status, train$collections_12_mths_ex_med)
prop_collections &lt;- round(prop.table(collections, 2) * 100, 2)
</code></pre>

<p><img src="https://media.giphy.com/media/l0EoBRrHj3ClWLzRm/giphy.gif" alt="" /></p>

<h2 id="you-rock">You Rock!</h2>

    </div>

    


    
      






  







<div class="media author-card" itemscope itemtype="http://schema.org/Person">
  
  <img class="portrait mr-3" src="https://s.gravatar.com/avatar/4cc3711ee1bf14eef1b48a6703e86be8?s=200')" itemprop="image" alt="Avatar">
  

  <div class="media-body">
    <h5 class="card-title" itemprop="name"><a href="../../authors/admin">Rihad Variawa</a></h5>
    <h6 class="card-subtitle">Data Scientist</h6>
    <p class="card-text" itemprop="description">I am a Senior Data Scientist at Malastare AI and head of global Fintech Research, responsible for overall vision and strategy, investment priorities and offering development. Working in the financial services industry, helping clients adopt new technologies that can transform the way they transact and engage with their customers. I am passionate about data science, super inquisitive and challenge seeker; looking at everything through a lens of numbers and problem-solver at the core.</p>
    <ul class="network-icon" aria-hidden="true">
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="../../#contact" >
          <i class="fas fa-envelope"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://twitter.com/2series_rv" target="_blank" rel="noopener">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://www.linkedin.com/in/rihad-variawa-7422017b" target="_blank" rel="noopener">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://github.com/2series" target="_blank" rel="noopener">
          <i class="fab fa-github"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://medium.com/@rihadvariawa/" target="_blank" rel="noopener">
          <i class="fab fa-medium"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://rihadvariawa.blogspot.com/" target="_blank" rel="noopener">
          <i class="fab fa-blogger"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://www.patreon.com/2series" target="_blank" rel="noopener">
          <i class="fab fa-patreon"></i>
        </a>
      </li>
      
    </ul>
  </div>
</div>



      
      
    

    
    <div class="article-widget">
      <div class="post-nav">
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="../../post/augmentingcompliance/" rel="prev">AI Augmenting Compliance</a>
  </div>
  
</div>

    </div>
    

    
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "2series" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



  </div>
</article>

<div class="container">
  <footer class="site-footer">
  
  <p class="powered-by">
    <a href="../../privacy/">Privacy Policy</a>
  </p>
  

  <p class="powered-by">
    &copy; 2020 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

</div>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    
    <script src="../../js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    

    
    
    
    <script id="dsq-count-scr" src="//2series.disqus.com/count.js" async></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
      
    
    
    
    
    <script src="../../js/academic.min.eeda67bb2d1f96265d85659d1edc7a5e.js"></script>

  </body>
</html>

